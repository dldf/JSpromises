<!DOCTYPE html>
<html>
<body>
   <h1>4</h1>
   <h2>JavaScript Promise zyBook Examples</h2>
   <p>Open Console to see script output.</p>
   <p>Open Source to see Promise code, comments.</p>

   <h2>Finally, if data may be to be passed to .then. </h2>
   <p>Data is passed with the reject(arg) or resolve(arg). The .then callbacks both accept a parameter that are returned from the promise. </p>

<script>

function saveToCloudAsync(userData) {               // returns a promise obj
   return new Promise(function(resolve, reject) {   // executor fn: 2 params
      if (!userData) {
         reject("no data"); // call reject with data param
      }
          
      // Simulate saving taking 2 seconds  call resolve with data param
      setTimeout(()=>resolve("user says, " + userData), 2000);
   });
}

// zyBook 8.11.8
function saveUserData(data) {
   let promise = saveToCloudAsync(data); // just gets the returned promise 
   promise.then(dataSaved, saveFailed)   // and calls fn dep. on state
}

function dataSaved(whatdata) { // parameter comes from resolve
    console.log("Saved to cloud :D")
    console.log("Data: " + whatdata)
}

function saveFailed(whyfail) { // parameter comes from reject
    console.log("Save failed :P")
    console.log("Error messgage is: " + whyfail)
}

// test it...
result = saveUserData("Kookseverywhere!!") // try null
console.log(result)

</script>

</body>
</html>
